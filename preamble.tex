%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 모든 패키지, 사용자 정의 매크로 호출 
\input{../../structure/package.sty} % 컴파일이 일어나는 main 기준으로 두 단계 올라가서 다시 내려옴
\input{../../structure/page.sty}
\input{../../structure/format.sty}
\input{../../structure/box.sty}
\input{../../structure/tablefigure.sty}
\input{../../structure/seolf.sty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 페이지 설정
\newcommand{\geoTop}   {20mm} % 위쪽 여백
\newcommand{\geoBottom}{20mm} % 아래 여백
\newcommand{\geoLeft}  {20mm} % 좌측 여백
\newcommand{\geoRight} {20mm} % 우측 여백
\geometry{a4paper, % 기본용지 설정
top=\geoTop, bottom=\geoBottom, left=\geoLeft, right=\geoRight}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 경고 무시
\hbadness=10000 % underfull hbox 경고 무시(수평 방향 여백 경고 badness 10000까지 무시)
\vbadness=10000 % overfull hbox 경고 무시(수직 방향 페이니 나눔 단락 경고 badness 10000까지 무시)
\hfuzz=7pt  % 7pt 이하의 overfull \hbox 경고 무시


% 제목, 서문, 목차 불러오는 함수 만들기
\newcommand{\includeHead}[1]{\input{../includes/#1.tex}} % 경로 확인할 것

% 참고문헌
\newcommand{\setupBib}{ % 참고문헌 있는 경우 불러오기
  \usepackage[backend=biber, style=numeric, sorting=none]{biblatex}
  \usepackage{csquotes}
  \addbibresource{../bib/papers.bib}
  \addbibresource{../bib/references.bib}
  \addbibresource{../bib/websites.bib}}
\newcommand{\printBib}{ % sloppy로 참고문헌 출력시 길이가 길다면 강제 줄바꿈
  \begin{sloppypar} \printbibliography \end{sloppypar}}

% 챕터 불러오기 - 이거 안쓰기로 함. 저장으로 컴파일이 안되는 문제 발생함
\newcommand{\loadchapter}[1]{\subimport{../chapters/#1/}{chapter.tex}}
% 히든 챕터 불러오기 - 안쓰는 챕터지만 식 참조 위하여 외부참조(aux 파일 한 번 컴파일 해야 함)
\newcommand{\hiddenchapter}[1]{%
  \externaldocument[]{../chapters/#1/chapter}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 캡션, 링크
\renewcommand{\equationautorefname}{Eq.} % 수식 참조 시 equation이 아닌 Eq. 로 나옴. aliascnt 필요
\renewcommand{\figureautorefname}{Fig.} % figure는 Fig
\renewcommand{\tableautorefname}{Table.} % table은 Table 그대로
\captionsetup[figure]{name=Fig.} % 그림 아래 캡션도 Fig. 으로 나오도록 함. caption 필요
\captionsetup[figure]{width=0.8\linewidth} % 캡션 너비 조절


\DeclareCaptionFont{mycaptionfont}{\fontsize{9pt}{9pt}\selectfont}
\captionsetup[figure]{font=mycaptionfont}
\captionsetup[table]{font=mycaptionfont}

\captionsetup[table]{width=0.8\linewidth}
\numberwithin{equation}{section} % eq, figure, table이 표시되는 것을 section까지 설정함. 설정하지 않으면 18.1처럼 chapter 별로 정리됨
\numberwithin{figure}{section}
\numberwithin{table}{section}
\setlength{\abovecaptionskip}{3pt}  % 캡션 위 간격
\setlength{\belowcaptionskip}{-12pt}  % 캡션 아래 간격

\makeatletter\g@addto@macro\normalsize{ % 수식 위아래 여백 설정, 전역으로 고정시킴
  \setlength{\abovedisplayskip}{0pt}      % 일반적인 디스플레이 수식 위쪽 간격, 모두 0이면 본문과 똑같이 모두 붙음
  \setlength{\belowdisplayskip}{0pt}      % 일반적인 디스플레이 수식 아래쪽 간격
  \setlength{\abovedisplayshortskip}{0pt} % 특수상황(수식 앞줄이 짧게 끝나는 경우)
  \setlength{\belowdisplayshortskip}{0pt} % 특수상황(수식 아랫줄이 짧게 끝나는 경우)
  \setlength{\lineskiplimit}{0pt}         % 인라인 모드 한계치(줄높이가 baselineskip보다 얼마나 부족한가)
  \setlength{\lineskip}{0pt}              % 한계치보다 부족한 경우 추가 여유 간격
}\makeatother